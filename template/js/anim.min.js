(()=>{"use strict";var t,i,s,h,e=[(t,i,s)=>{s.d(i,{t:()=>h});class h{static i=new h;h;canvas;o;position;l;u;m;p;v;_;M=new Float32Array(16);I;P;k;A;F;S;static T(t){let i=t.toString();switch(i.length){case 3:return i;case 2:return"0"+i;default:return"00"+i}}$(t,i,s,h,e,n){this.M[0]=2/(i-t),this.M[1]=0,this.M[2]=0,this.M[3]=0,this.M[4]=0,this.M[5]=2/(h-s),this.M[6]=0,this.M[7]=0,this.M[8]=0,this.M[9]=0,this.M[10]=2/(e-n),this.M[11]=0,this.M[12]=(t+i)/(t-i),this.M[13]=(s+h)/(s-h),this.M[14]=(e+n)/(e-n),this.M[15]=1}scale(t,i){this.M[0]*=t,this.M[1]*=t,this.M[2]*=t,this.M[3]*=t,this.M[4]*=i,this.M[5]*=i,this.M[6]*=i,this.M[7]*=i}translate(t,i){this.M[12]=this.M[0]*t+this.M[4]*i+this.M[8]+this.M[12],this.M[13]=this.M[1]*t+this.M[5]*i+this.M[9]+this.M[13],this.M[14]=this.M[2]*t+this.M[6]*i+this.M[10]+this.M[14],this.M[15]=this.M[3]*t+this.M[7]*i+this.M[11]+this.M[15]}}},(t,i,s)=>{s.d(i,{b:()=>h});class h{x=0;y=0}},(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(0),e=s(3),n=s(4),o=s(6),a=s(5),r=s(1);const t="\nattribute vec2 vertexPosition;\nattribute vec2 texturePosition;\n\nuniform mat4 u_matrix;\n\nvarying vec2 vTexturePosition;\n\nvoid main(void) {\n    gl_Position = u_matrix * vec4(vertexPosition, 0.0, 1.0);\n    vTexturePosition = texturePosition;\n}",l="\nprecision mediump float;\n\nuniform sampler2D sampler;\nuniform float v_alpha;\nuniform int mode;\nuniform float canvasH;\nuniform vec3 color1;\nuniform vec3 color2;\n\nvarying vec2 vTexturePosition;\n\nvoid main(void) {\n    if (mode == 3) {\n        float frac = gl_FragCoord.y / canvasH;\n        if (frac > 0.5)\n            frac = 1.0 - frac;\n        gl_FragColor = vec4(color1 + (color2 * frac), 1.0);\n    } else {\n        vec4 c = texture2D(sampler, vTexturePosition);\n        c.xyz *= (v_alpha * c.a);\n        if (mode == 1) {\n            c.a*=v_alpha;\n            c.xyz*=v_alpha;\n        } else {\n            c.a*=v_alpha;\n            c.xyz=1.0-c.a+c.xyz*c.a;\n        }\n        gl_FragColor = c;\n    }\n}";var c;void 0!==window.OffscreenCanvas&&void 0!==window.OffscreenCanvas.prototype.convertToBlob||(window.OffscreenCanvas=class{width;height;canvas;constructor(t,i){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.width=t,this.height=i}getContext(t){return this.canvas.getContext(t)}convertToBlob(t){const i=this;return new Promise((s=>{i.canvas.toBlob(s,t.type,t.quality)}))}});class u{B;N;L;D;C;O;R;U;q;X;I;P;j;loading;zoom;H;Y=!1;G;W;K;V;stopped=!0;Z=0;J=0;tt=new Array(4);it=new Array(4);st=new Array(4);stop=!1;ht=1e3/30;then=0;loaded=!1;et=new r.b;nt;constructor(){let t=this;function i(){const i=parseInt(t.zoom.value);if(isNaN(i)||i<=0)return;const s=h.t.i.canvas,n=window.devicePixelRatio||1,o=~~(s.clientWidth*n),a=~~(s.clientHeight*n),r=100/i,c=h.t.i.o;s.width=o,s.height=a;const l=o*r,u=a*r;h.t.i.A=l/2,h.t.i.F=2*u/3,c.uniform1f(h.t.i.k,a),c.viewport(0,0,o,a),h.t.i.$(0,l,u,0,-1,1),c.uniformMatrix4fv(h.t.i._,!1,h.t.i.M),h.t.i.S=r;const f=e.rt.i.ot;f[3]=u,f[4]=l,f[6]=l,f[7]=u,t.stopped&&t.ct()}this.lt(),this.zoom=document.getElementById("zoom");{const t=window.devicePixelRatio||1;this.zoom.value=(~~Math.min(100,Math.max(50,Math.min(h.t.i.canvas.clientWidth*t,h.t.i.canvas.clientHeight*t)/5))).toString()}i(),e.rt.i.ut(),window.onresize=i,this.zoom.onchange=i,this.ft();for(let t=0;t<this.tt.length;++t)this.tt[t]=new n.g;for(let t=0;t<this.st.length;++t)this.st[t]=new a.dt;for(let t=0;t<this.it.length;++t){const i=this.it[t]=new Array(4);for(let t=0;t<4;++t)i[t]=new o.w}{const t=new URL(location.href).searchParams.get("id");if(t){const i=parseInt(t);isFinite(i)&&i&&(this.C.value=i.toString())}}function s(i,s){h.t.i.A+=i,h.t.i.F+=s,t.stopped&&t.ct()}this.L.onclick=function(){t.wt(t.stopped),t.stopped?(t.stop=!1,t.stopped=!1,t.animate(),t.R.style.display="none"):(t.K=NaN,t.stop=!0,t.R.style.display="block")},this.B.onclick=function(){t.stopped&&(t.O.value=(++t.V).toString(),t.ct())},this.N.onclick=function(){t.stopped&&(t.V=Math.max(t.V-1,0),t.O.value=t.V.toString(),t.ct())},this.O.oninput=function(){t.stopped&&(t.V=parseInt(t.O.value),t.ct())},this.D.oninput=function(){t.Z=t.D?.selectedIndex,t.vt(),t.V=0,t.ct()},this.U.onclick=function(){const s=e.rt.i;s.gt(),t.ct(),s.yt();const n=new OffscreenCanvas(Math.max(s.bt-s._t,100),Math.max(s.xt-s.Mt,100));t.It(n);const o=n.getContext("2d");s.Pt=s._t,s.kt=s.Mt,t.ct(!0),o.drawImage(h.t.i.o.canvas,0,0),n.convertToBlob({type:"image/png",quality:1}).then((function(i){const s=document.createElement("a"),h=window.URL.createObjectURL(i);s.href=h,s.download=`Cat No.${t.K}.png`,s.click()})),s.Pt=s.kt=0,i()},this.q.onclick=function(){t.stop=!0,t.V=0;const s=h.t.i.o;let n=prompt("每禎延遲(毫秒)\n延遲 = 1000 / 禎率 = 1000 / 30 = 33.33...","33");if(!n)return;if(n=parseInt(n),!isFinite(n)||n<=0)return;let o=prompt("開始禎","0");if(!o)return;o=parseInt(o);const a=t.it[t.J][t.Z].At;if(!isFinite(o)||o<0||o>a)return;let r=prompt("結束禎",a.toString());if(!r)return;if(r=parseInt(r),!isFinite(r)||o>r)return;let c=prompt("畫質(像素採樣間隔，越低品質越好，最低1)","10");if(!c)return;if(c=parseInt(c),!isFinite(c)||c<=0)return;const l=e.rt.i;l.gt();for(let i=o;i<=r;++i)t.ct(!0),t.V=i;l.yt();const u=new OffscreenCanvas(Math.max(l.bt-l._t,100),Math.max(l.xt-l.Mt,100));t.It(u);const f=u.getContext("2d",{Ft:!0});l.Pt=l._t,l.kt=l.Mt;const d=new GIF({quality:c,width:u.width,height:u.height,workerScript:"gif.worker.min.js"});for(let i=o;i<=r;++i)t.ct(!0),t.V=i,f.drawImage(s.canvas,0,0),d.frames.push({data:f.getImageData(0,0,u.width,u.height).data,delay:n,St:!1,dispose:-1});l.Pt=l.kt=0;let m=t.O?.max;t.O.value="0",d.on("progress",(function(i){t.O.value=(~~(1e3*i)).toString()})),d.on("finished",(function(i){const s=document.createElement("a"),h=window.URL.createObjectURL(i);s.href=h,s.download="animation.gif",s.click(),t.O.value=m})),d.render(),i()},document.getElementById("fps").oninput=function(i){const s=i.currentTarget;t.ht=1e3/parseInt(s.value)},t.I=document.getElementById("color1"),t.P=document.getElementById("color2"),t.I.oninput=t.P.oninput=function(i){const s=t.I.value,e=t.P.value,n=[parseInt(s.substring(1,3),16),parseInt(s.substring(3,5),16),parseInt(s.substring(5,7),16)],o=[parseInt(e.substring(1,3),16)-n[0],parseInt(e.substring(3,5),16)-n[1],parseInt(e.substring(5,7),16)-n[2]],a=h.t.i.o;a.uniform3f(h.t.i.I,n[0]/255,n[1]/255,n[2]/255),a.uniform3f(h.t.i.P,o[0]/255,o[1]/255,o[2]/255),t.stopped&&t.ct()},this.nt=this.animate.bind(this),document.getElementById("settings").onclick=document.getElementById("share").onclick=function(i){if(i.stopPropagation(),t.H&&!(i.target instanceof HTMLInputElement))return t.H.style.display="none",void(t.H=null);t.H=i.currentTarget.firstElementChild.nextElementSibling,t.H.style.display="block"},document.getElementById("nextu").onclick=async function(i){i.stopPropagation();let s=parseInt(t.C.value);s+=1,t.C.value=s.toString(),t.K=NaN,t.stop=!0;const h=new URL(location.href);h.searchParams.set("id",s.toString()),history.pushState({},"",h),await t.Tt(s),t.V=0,t.ct(),t.V=0,t.R.style.display="block"},document.getElementById("prevu").onclick=async function(i){i.stopPropagation();let s=parseInt(t.C.value);s-=1,t.C.value=s.toString(),t.K=NaN,t.stop=!0;const h=new URL(location.href);h.searchParams.set("id",s.toString()),history.pushState({},"",h),await t.Tt(s),t.V=0,t.ct(),t.V=0,t.R.style.display="block"},window.onkeydown=function(i){switch(i.keyCode){case 80:case 32:t.L.onclick();break;case 68:case 39:s(4,0);break;case 65:case 37:s(-4,0);break;case 87:case 38:s(0,-4);break;case 83:case 40:s(0,4);break;case 78:t.B.onclick();break;case 66:t.N.onclick()}};for(let i of this.X.children)i.onclick=function(i){const s=i.currentTarget;t.J=parseInt(s.getAttribute("data-i"));for(let i of t.X?.children)i.className=i==s?"active":"";t.vt(),t.O.value="0",t.V=0,t.stopped&&t.ct()};h.t.i.canvas.addEventListener("mousedown",(function(i){t.Y=!0})),h.t.i.canvas.addEventListener("mouseup",(function(i){t.Y=!1})),h.t.i.canvas.addEventListener("mousemove",(function(i){if(i.preventDefault(),i.stopPropagation(),t.Y&&(h.t.i.A+=i.movementX,h.t.i.F+=i.movementY,t.stopped)){e.rt.i.ut();t.st[t.J].$t(h.t.i.A-t.et.x,h.t.i.F-t.et.y)}})),h.t.i.canvas.addEventListener("touchstart",(function(i){t.G=i.touches[0].clientX,t.W=i.touches[0].clientY,i.preventDefault(),"block"==t.R.style.display&&(t.R.style.display="none",t.L.onclick())})),h.t.i.canvas.addEventListener("touchmove",(function(i){i.preventDefault();const{clientX:s,clientY:n}=i.changedTouches[0];if(h.t.i.A+=s-t.G,h.t.i.F+=n-t.W,t.G=s,t.W=n,t.stopped){e.rt.i.ut();t.st[t.J].$t(h.t.i.A-t.et.x,h.t.i.F-t.et.y)}})),this.R.addEventListener("click",(function(){t.R.style.display="none",t.L.onclick()})),h.t.i.canvas.addEventListener("click",(function(){if(t.H)return t.H.style.display="none",void(t.H=null);"block"==t.R.style.display&&(t.R.style.display="none",t.L.onclick())})),this.C.onchange=this.Bt.bind(this),addEventListener("wheel",(function(i){const s=Math.sign(i.deltaY);t.zoom.value=s>0?(parseInt(t.zoom.value)-5).toString():(parseInt(t.zoom.value)+5).toString(),t.zoom.onchange()})),this.Bt()}vt(){const t=this.it[this.J][this.Z].At;this.O.max=t.toString(),this.O.disabled=!t}wt(t){const i=this.L.firstElementChild,s=i.nextElementSibling;t?(s.style.display="none",i.style.display="block"):(s.style.display="block",i.style.display="none")}lt(){const i=h.t.i;if(i.canvas=document.getElementById("canvas"),!(i.o=i.canvas.getContext("webgl2")||i.canvas.getContext("webgl")||i.canvas.getContext("experimental-webgl")))throw alert("您的瀏覽器不支援 WebGL"),"";const s=i.o;function n(t,i){const h=s.createShader(t);if(s.shaderSource(h,i),s.compileShader(h),!s.getShaderParameter(h,s.COMPILE_STATUS)){const t=s.getShaderInfoLog(h);throw alert(t),t}return h}const o=s.createProgram();s.attachShader(o,n(s.VERTEX_SHADER,t)),s.attachShader(o,n(s.FRAGMENT_SHADER,l)),s.linkProgram(o),s.useProgram(o),i.h=o,i.position=s.getAttribLocation(o,"vertexPosition"),i.u=s.getAttribLocation(o,"texturePosition"),i.v=s.getUniformLocation(o,"mode"),i._=s.getUniformLocation(o,"u_matrix"),i.l=s.createBuffer(),i.m=s.createBuffer(),i.p=s.getUniformLocation(o,"v_alpha"),i.k=s.getUniformLocation(o,"canvasH"),i.I=s.getUniformLocation(o,"color1"),i.P=s.getUniformLocation(o,"color2"),s.bindBuffer(s.ARRAY_BUFFER,i.l),s.vertexAttribPointer(i.position,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(i.position),s.bindBuffer(s.ARRAY_BUFFER,i.m),s.vertexAttribPointer(i.u,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(i.u),s.bindBuffer(s.ARRAY_BUFFER,i.m),s.bufferData(s.ARRAY_BUFFER,e.rt.i.Nt,s.STATIC_DRAW),s.uniform3f(i.I,70/255,140/255,160/255),s.uniform3f(i.P,45/255,90/255,90/255),s.clearColor(1,1,1,1),s.enable(s.BLEND)}ft(){this.R=document.getElementById("start-play"),this.D=document.getElementById("animtype"),this.B=document.getElementById("next"),this.N=document.getElementById("prev"),this.L=document.getElementById("pause"),this.C=document.getElementById("unitid"),this.O=document.getElementById("range"),this.U=document.getElementById("downloadImg"),this.q=document.getElementById("downloadV"),this.X=document.getElementById("icons"),this.j=document.getElementById("nframe"),this.loading=document.getElementById("loading")}ct(t=!1){if(!this.loaded)return;const i=this.st[this.J],s=this.it[this.J][this.Z];this.V>s.At&&(this.V=0),this.j.textContent=this.V.toString(),i.Lt(s,this.V);const n=i.Dt(0);n.a.Ct(i,n.d,n.e,this.et),t?h.t.i.o.clear(h.t.i.o.COLOR_BUFFER_BIT):e.rt.i.ut(),i.$t(h.t.i.A-this.et.x,h.t.i.F-this.et.y)}It(t){const i=h.t.i.canvas;i.width=t.width,i.height=t.height,h.t.i.o.viewport(0,0,i.width,i.height);window.devicePixelRatio;h.t.i.$(0,i.width,i.height,0,-1,1),h.t.i.o.uniformMatrix4fv(h.t.i._,!1,h.t.i.M),h.t.i.S=1}async Bt(){let t=parseInt(this.C.value);if(!isFinite(t))return;this.K=NaN,this.stop=!0;const i=new URL(location.href);i.searchParams.set("id",t.toString()),i.href!=location.href&&history.pushState({},"",i),await this.Tt(t),this.V=0,this.ct(),this.V=0,this.R.style.display="block"}animate(t){if(null!=t&&(this.O.value=this.V.toString()),this.stop){if(isNaN(this.K)){this.stopped=!0;let t=parseInt(this.C.value);if(!isFinite(t))return;this.K=t}else this.stop=!1,this.V=0,this.stopped=!1,this.animate();return}requestAnimationFrame(this.nt);const i=performance.now(),s=i-this.then;s>this.ht&&(this.then=i-s%this.ht,this.ct(),++this.V)}async Tt(t){if(this.J=0,this.loaded=!1,this.loading.style.display="block",t<0){-0==(t=-(t+1))&&(t=0);let i=await fetch(`img/e/${t}/a`);if(!i.ok)throw"";let s=await i.json();await this.tt[0].load(`/img/e/${t}/c.png`,s[0]),this.st[0].zt(this.tt[0]),this.st[0].load(s[1]);for(let t=0;t<4;++t)this.it[0][t].load(s[t+2]);this.vt();const h=this.X?.children;return h[0].style.display="none",h[1].style.display="none",h[2].style.display="none",this.loading.style.display="none",void(this.loaded=!0)}const i=c[t];let s=0;const h=this.X?.children;for(const t of h)t.style.display="none";if(null!=i){for(const t of i){let i=await fetch(`/img/s/${t}/a`);if(!i.ok)throw"";let e=await i.json();await this.tt[s].load(`/img/s/${t}/c.png`,e[0]),this.st[s].zt(this.tt[s]),this.st[s].load(e[1]);for(let t=0;t<4;++t)this.it[s][t].load(e[t+2]);const n=h[s];n.style.display="block",n.src=`/img/s/${t}/${s}.png`,s+=1}try{let i=await fetch(`/img/u/${t}/a`),e=await i.json();await this.tt[2].load(`/img/u/${t}/c2.png`,e[0][0]),this.st[2].zt(this.tt[2]),this.st[2].load(e[0][1]);for(let t=0;t<4;++t)this.it[2][t].load(e[0][t+2]);const n=h[2];n.style.display="block",n.src=`/img/u/${t}/2.png`,n.className=s?"":"active"}catch(t){console.error(t)}}else{let i=await fetch(`/img/u/${t}/a`);if(!i.ok)throw"";let e=await i.json();for(const i of e){const e=h[s];e.style.display="block",e.src=`/img/u/${t}/${s}.png`,e.className=s?"":"active",await this.tt[s].load(`/img/u/${t}/c${s}.png`,i[0]),this.st[s].zt(this.tt[s]),this.st[s].load(i[1]);for(let t=0;t<4;++t)this.it[s][t].load(i[t+2]);s+=1}}this.vt(),this.loading.style.display="none",this.loaded=!0}}const f="./common.mjs";(await import(f)).loadScheme("units",["eggs"]).then((t=>{c=t.eggs,new u})),i()}catch(t){i(t)}}),1)},(t,i,s)=>{s.d(i,{rt:()=>e});var h=s(0);class e{static i=new e;Ot=!1;_t;bt;xt;Mt;Pt=0;kt=0;Nt=new Float32Array(8);ot=new Float32Array(8);gt(){this._t=h.t.i.canvas.width,this.bt=0,this.Mt=h.t.i.canvas.height,this.xt=0,this.Ot=!0}yt(){this.Ot=!1,this._t=this._t-10,this.bt=this.bt+10,this.Mt=this.Mt-10,this.xt=this.xt+10}Rt(t){const i=h.t.i.o;let s=1,e=i.ONE,n=i.ONE_MINUS_SRC_ALPHA;switch(t){case 1:n=i.ONE;break;case 2:e=i.ZERO,n=i.SRC_COLOR;break;case 3:e=i.ONE_MINUS_DST_COLOR,n=i.ONE,s=2}i.blendFunc(e,n),i.uniform1i(h.t.i.v,s)}Ut(t,i,s,e,n,o,a,r,c,l,u,f,d){if(this.Ot)return this._t=Math.min(i,e,o,r,this._t),this.bt=Math.max(i,e,o,r,this.bt),this.Mt=Math.min(s,n,a,c,this.Mt),void(this.xt=Math.max(s,n,a,c,this.xt));const m=h.t.i.o;this.Nt[0]=i-this.Pt,this.Nt[1]=s-this.kt,this.Nt[2]=e-this.Pt,this.Nt[3]=n-this.kt,this.Nt[4]=r-this.Pt,this.Nt[5]=c-this.kt,this.Nt[6]=o-this.Pt,this.Nt[7]=a-this.kt,m.bindBuffer(m.ARRAY_BUFFER,h.t.i.l),m.bufferData(m.ARRAY_BUFFER,this.Nt,m.STATIC_DRAW),this.Nt[0]=l,this.Nt[1]=u,this.Nt[2]=l,this.Nt[3]=u+d,this.Nt[4]=l+f,this.Nt[5]=u,this.Nt[6]=l+f,this.Nt[7]=u+d;for(let i=0;i<8;)this.Nt[i++]/=t.qt,this.Nt[i++]/=t.Xt;m.bindBuffer(m.ARRAY_BUFFER,h.t.i.m),m.bufferData(m.ARRAY_BUFFER,this.Nt,m.STATIC_DRAW),m.bindTexture(m.TEXTURE_2D,t.jt),m.drawArrays(m.TRIANGLE_STRIP,0,4)}setAlpha(t){h.t.i.o.uniform1f(h.t.i.p,t)}ut(){const t=h.t.i.o;t.blendFunc(t.ONE,t.ZERO),t.bindBuffer(t.ARRAY_BUFFER,h.t.i.l),t.bufferData(t.ARRAY_BUFFER,this.ot,t.STATIC_DRAW),t.uniform1i(h.t.i.v,3),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}},(t,i,s)=>{s.d(i,{g:()=>o});var h=s(0);class e{x;y;width;height}var n=s(7);class o{jt;qt;Xt;name;Ht;async load(t,i,s=0){if(this.reset(),null!=i)if(1&s){let t=new n.Yt;t.Gt(i),t.Et(),t.Et(),t.Et(),t.Wt();let s=t.Kt(0);this.Ht=new Array(s);for(let i=0;i<s;i++)t.Wt(),this.Ht[i].x=t.Kt(0),this.Ht[i].y=t.Kt(1),this.Ht[i].width=t.Kt(2),this.Ht[i].height=t.Kt(3);t.close()}else{let t=new n.Yt;t.Gt(i),t.Et(),t.Et(),t.Et(),t.Wt();let s=t.Kt(0);this.Ht=new Array(s);for(let i=0;i<s;i++)t.Wt(),this.Ht[i]=new e,this.Ht[i].x=t.Kt(0),this.Ht[i].y=t.Kt(1),this.Ht[i].width=t.Kt(2),this.Ht[i].height=t.Kt(3);t.close()}const o=h.t.i.o,a=document.createElement("img");a.crossOrigin="anonymous",a.src=t,await new Promise((function(t,i){a.onload=t,a.onerror=i})),this.qt=a.naturalWidth,this.Xt=a.naturalHeight,this.jt=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.jt),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,a)}reset(){this.jt&&(h.t.i.o.deleteTexture(this.jt),this.jt=null)}}},(t,i,s)=>{s.d(i,{dt:()=>c});var h=s(7);class e{M=new Float32Array(6);constructor(){this.Vt()}Vt(){this.M[0]=1,this.M[1]=0,this.M[2]=0,this.M[3]=0,this.M[4]=1,this.M[5]=0}rotate(t){let i=Math.cos(t*Math.PI/180);t=Math.sin(t*Math.PI/180);let s=this.M[0];this.M[0]=this.M[0]*i+this.M[1]*t,this.M[1]=s*-t+this.M[1]*i,s=this.M[3],this.M[3]=this.M[3]*i+this.M[4]*t,t=-t,this.M[4]=i*this.M[4]+t*s}setTranslate(t,i){this.M[0]=1,this.M[1]=0,this.M[2]=t,this.M[3]=0,this.M[4]=1,this.M[5]=i}setRotate(t){this.M[0]=Math.cos(t*Math.PI/180),this.M[1]=-Math.sin(t*Math.PI/180),this.M[2]=0,this.M[3]=Math.sin(t*Math.PI/180),this.M[4]=Math.cos(t*Math.PI/180),this.M[5]=0}setScale(t,i){this.M[0]=t/100,this.M[1]=0,this.M[2]=0,this.M[3]=0,this.M[4]=i/100,this.M[5]=0}scale(t,i){this.M[0]=this.M[0]*t/100,this.M[1]=this.M[1]*i/100,this.M[3]=this.M[3]*t/100,this.M[4]=this.M[4]*i/100}set(t){this.M.set(t.M)}transform(t,i,s){s.x=~~(this.M[0]*t+this.M[1]*i+this.M[2]),s.y=~~(this.M[3]*t+this.M[4]*i+this.M[5])}translate(t,i){this.M[2]=this.M[2]+this.M[0]*t+this.M[1]*i,this.M[5]=this.M[5]+this.M[3]*t+this.M[4]*i}mul(t){const i=this.M[0],s=t.M[0],h=this.M[1],e=t.M[3],n=this.M[2],o=t.M[1],a=this.M[3],r=t.M[4],c=this.M[4],l=(t.M[2],this.M[5]),u=t.M[5];this.M[0]=i*s+h*e,this.M[1]=i*o+h*r,this.M[2]=n*s+a*e,this.M[3]=n*o+a*r,this.M[4]=c*s+l*e,this.M[5]=c*o+l*r+u}}var n=s(1);class o{Zt;Jt;Qt;ti;ii;si;hi;ei;ni;oi;ai;ri;ci;li;ui;fi;di;mi;wi;pi;gi;s;yi;bi;_i;xi;rotation;Mi;alpha;Ii;Pi;E=new Int32Array(8);ki=new n.b;Ai=new e;reset(t,i){this.Ii=1,this.Pi=1,this.si=0,this.ei=0,this.oi=0,this.fi=0,this.ui=0,this.wi=0,this.pi=0,this.ri=0,this.xi=t,this.yi=t,this.Mi=0,this.Qt=i}Lt(t){let i,s,h;this.ii+this.si>-1?(h=t.Fi[this.ii+this.si],this.s=i=~~(this.gi*this.yi*h.s/t.Si/t.Si),this._i=s=~~(this.bi*this.xi*h._i/t.Si/t.Si),this.Zt=this.Jt=this.alpha*this.Qt*h.Zt/t.Ti/t.Ti):(i=this.gi*this.yi/t.Si,this.s=i,s=this.bi*this.xi/t.Si,this._i=s,this.Zt=this.Jt=this.alpha*this.Qt/t.Ti),this.hi+this.ei>-1&&(this.E[0]=this.E[2]=-(this.di+this.wi)*i/t.Si,this.E[4]=this.E[6]=i*t.$i.Ht[this.ni+this.oi].width/t.Si+this.E[0],this.E[1]=this.E[7]=-(this.mi+this.pi)*s/t.Si,this.E[3]=this.E[5]=s*t.$i.Ht[this.ni+this.oi].height/t.Si+this.E[1]),h?(this.Ai.set(h.Ai),this.Ai.translate((this.ci+this.ui)*h.s/t.Si,(this.li+this.fi)*h._i/t.Si)):this.Ai.translate(this.ui,this.fi),this.Ai.rotate(360*(this.rotation+this.Mi)/t.Bi);for(let t=0;t<8;t+=2)this.Ai.transform(this.E[t],this.E[t+1],this.ki),this.E[t]=this.ki.x,this.E[t+1]=this.ki.y}Ct(t,i,s,h){this.Ai.transform((i-this.di-this.wi)*this.s/t.Si,(s-this.mi-this.pi)*this._i/t.Si,h)}Ni(t,i){switch(t){case 0:return void(this.si=i-this.ii);case 1:return void(this.ei=i-this.hi);case 2:return void(this.oi=i-this.ni);case 3:return void(this.ri=i-this.ai);case 4:return void(this.ui=i);case 5:return void(this.fi=i);case 6:return void(this.wi=i);case 7:return void(this.pi=i);case 8:return this.xi=i,void(this.yi=i);case 9:return void(this.yi=i);case 10:return void(this.xi=i);case 11:return void(this.Mi=i);case 12:return void(this.Qt=i);case 13:return void(this.Ii=i?-1:1);case 14:return void(this.Pi=i?-1:1)}}draw(t,i,s,h){if(this.hi<0||this.ni<0)return;i.Rt(this.ti);const e=this.Jt/t.Ti;if(!e)return;i.setAlpha(e);const n=t.$i,o=n.Ht[this.oi+this.ni];i.Ut(n,this.E[0]+s,this.E[1]+h,this.E[2]+s,this.E[3]+h,this.E[4]+s,this.E[5]+h,this.E[6]+s,this.E[7]+h,o.x,o.y,o.width,o.height)}}class a{a;b;c;d;e;f;g}var r=s(3);class c{$i;Fi;Li;Di;e;Si;Bi;Ti;Ci;zi;Dt(t){return this.Ci[t]}zt(t){this.$i=t}$t(t,i){const s=r.rt.i;for(let h=0;h<this.Li;h++)this.Fi[this.Di[h]].draw(this,s,t,i)}Oi(t,i,s){let h=i,e=i;for(let s=i-1;s>=0&&3==t[s].Ri;s--)h=s;for(let s=i+1;s<t.length&&3==t[e=s].Ri;s++);let n=0;for(let i=h;i<=e;i++){let o=4096*t[i].Ui;for(let n=h;n<=e;n++)i!=n&&(o*=(s-t[n].frame)/(t[i].frame-t[n].frame));n+=o}return~~(n/4096)}Lt(t,i=0){if(!i)for(let t of this.Fi)t.reset(this.Si,this.Ti);if(t)for(let s of t.Fi){const t=s.loop,h=s.max,e=s.qi,n=h-e;let o=-1==t?h?(i+s.off)%h:0:i+s.off;if(t>0&&n){if(o>e+t*n){s.Xi(this.Fi);continue}o<=e||(o=o<e+t*n?e+(o-e)%n:h)}for(let t=0;t<s.ji;++t)if(o==s.Hi[t].frame)this.Fi[s.Yi].Ni(s.Gi,s.Ei=s.Hi[t].Ui);else if(t<s.ji-1&&o>s.Hi[t].frame&&o<s.Hi[t+1].frame){if(s.Gi>1){const i=s.Hi[t].frame,h=s.Hi[t].Ui,e=s.Hi[t+1].frame,n=s.Hi[t+1].Ui;let a=(o-i)/(e-i);if(1==s.Hi[t].Ri||13==s.Gi||14==s.Gi)a=0;else if(0==s.Hi[t].Ri);else if(2==s.Hi[t].Ri)a=s.Hi[t].Wi>=0?1-Math.sqrt(1-Math.pow(a,s.Hi[t].Wi)):Math.sqrt(1-Math.pow(1-a,-s.Hi[t].Wi));else{if(3==s.Hi[t].Ri){s.Ei=this.Oi(s.Hi,t,o),this.Fi[s.Yi].Ni(s.Gi,s.Ei);break}4==s.Hi[t].Ri&&(a=s.Hi[t].Wi>0?1-Math.cos(a*Math.PI/2):s.Hi[t].Wi<0?Math.sin(a*Math.PI/2):(1-Math.cos(a*Math.PI))/2)}2==s.Gi?s.Ei=n-h<0?Math.ceil((n-h)*a+h):(n-h)*a+h:s.Ei=(n-h)*a+h,this.Fi[s.Yi].Ni(s.Gi,s.Ei=~~s.Ei);break}0==s.Gi&&this.Fi[s.Yi].Ni(0,s.Hi[t].Ui)}s.ji&&o>s.max&&s.Xi(this.Fi)}for(let t of this.Fi)t.Lt(this);for(let t=0;t<this.Li;t++)this.Di[t]=t,this.e[t]=this.Fi[t].ai+this.Fi[t].ri;for(let t=1;t<this.Li;t++){let i=this.Di[t],s=this.e[t],h=t-1;for(;h>=0&&this.e[h]>s;)this.Di[h+1]=this.Di[h],this.e[h+1]=this.e[h],h--;this.Di[h+1]=i,this.e[h+1]=s}}load(t){let i=new h.Yt;this.reset(),i.Gt(t),i.Et(),i.Wt(),i.Wt(),this.Li=i.Kt(0),this.Fi=new Array(this.Li),this.Di=new Int32Array(this.Li),this.e=new Int32Array(this.Li);for(let t=0;t<this.Li;t++)i.Wt(),this.Fi[t]=new o,this.Fi[t].ii=i.Kt(0),this.Fi[t].hi=i.Kt(1),this.Fi[t].ni=i.Kt(2),this.Fi[t].ai=i.Kt(3),this.Fi[t].ci=i.Kt(4),this.Fi[t].li=i.Kt(5),this.Fi[t].di=i.Kt(6),this.Fi[t].mi=i.Kt(7),this.Fi[t].gi=i.Kt(8),this.Fi[t].bi=i.Kt(9),this.Fi[t].rotation=i.Kt(10),this.Fi[t].alpha=i.Kt(11),this.Fi[t].ti=i.Kt(12);i.Wt(),this.Si=i.Kt(0),this.Bi=i.Kt(1),this.Ti=i.Kt(2),i.Wt(),this.zi=i.Kt(0),this.Ci=new Array(this.zi);for(let t=0;t<this.zi;t++)i.Wt(),this.Ci[t]=new a,this.Ci[t].b=i.Kt(0),this.Ci[t].a=this.Fi[this.Ci[t].b],this.Ci[t].c=i.Kt(1),this.Ci[t].d=i.Kt(2),this.Ci[t].e=i.Kt(3),this.Ci[t].f=i.Kt(4),this.Ci[t].g=i.Kt(5);i.close()}Ki(){return this.Fi[0]}Vi(){return this.Si}reset(){this.Fi=void 0,this.Di=void 0,this.e=void 0,this.Ci=void 0}}},(t,i,s)=>{s.d(i,{w:()=>o});class h{frame;Ui;Ri;Wi}class e{Yi;Gi;loop;ji;Hi;off=0;max=0;qi=0;Ei=0;Zi(){if(this.ji&&(this.Hi[0].frame<0||-1!=this.loop)){this.off=-this.Hi[0].frame;for(let t=0;t<this.ji;++t)this.Hi[t].frame+=this.off}return this.ji&&(this.qi=this.Hi[0].frame,this.max=this.Hi[this.ji-1].frame),-1!=this.loop?this.loop>1?this.qi+(this.max-this.qi)*this.loop:this.max-this.off:this.max-Math.min(this.off,0)}Xi(t){this.ji&&t[this.Yi].Ni(this.Gi,this.Hi[this.ji-1].Ui)}}var n=s(7);class o{Fi;Li;At;load(t){let i=new n.Yt;this.At=0,i.Gt(t),i.Et(),i.Et(),i.Wt(),this.Li=i.Kt(0),this.Fi=new Array(this.Li);for(let t=0;t<this.Li;t++){i.Wt();const s=new e;this.Fi[t]=s,s.Yi=i.Kt(0),s.Gi=i.Kt(1),s.loop=i.Kt(2),i.Wt(),s.ji=i.Kt(0),s.Hi=new Array(s.ji);for(let t=0;t<s.ji;t++)i.Wt(),s.Hi[t]=new h,s.Hi[t].frame=i.Kt(0),s.Hi[t].Ui=i.Kt(1),s.Hi[t].Ri=i.Kt(2),s.Hi[t].Wi=i.Kt(3);let n=s.Zi();n>this.At&&(this.At=n)}i.close()}}},(t,i,s)=>{s.d(i,{Yt:()=>h});class h{a;b;Ji=0;Kt(t){return parseInt(this.b[t])}Gt(t){this.a=t}Qi(t){return this.b[t]}Et(){if(this.Ji>=this.a.length)return null;let t=this.Ji;if(this.Ji=this.a.indexOf("\n",t),-1==this.Ji)return this.Ji=this.a.length,this.a.slice(t);let i=this.a.slice(t,this.Ji++);return i.includes("\r")?i.replaceAll("\r",""):i}Wt(t=","){let i=this.Et();return i&&(this.b=i.split(t)),this.b}c(){return this.a}close(){}}}],n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,o),s.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},o.a=(e,n,o)=>{var a;o&&((a=[]).d=-1);var r,c,l,u=new Set,f=e.exports,d=new Promise(((t,i)=>{l=i,c=t}));d[i]=f,d[t]=t=>(a&&t(a),u.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;r=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{o[i]=t,h(n)}),(t=>{o[s]=t,h(n)}));var o={};return o[t]=t=>t(n),o}}var a={};return a[t]=t=>{},a[i]=e,a})))(e);var o=()=>r.map((t=>{if(t[s])throw t[s];return t[i]})),c=new Promise((i=>{(n=()=>i(o)).r=0;var s=t=>t!==a&&!u.has(t)&&(u.add(t),t&&!t.d&&(n.r++,t.push(n)));r.map((i=>i[t](s)))}));return n.r?c:o()}),(t=>(t?l(d[s]=t):c(f),h(a)))),a&&a.d<0&&(a.d=0)},o.d=(t,i)=>{for(var s in i)o.ts(i,s)&&!o.ts(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o.ts=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);o(2)})();