var _th=localStorage.getItem("theme");function toggleTheme(){"dark"==localStorage.getItem("theme")?(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")):(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"))}("dark"==_th||!_th&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.setAttribute("data-theme","dark");let _sis=document.getElementById("site-search"),_s_r=document.getElementById("site-s-result");function _s_open(w){location.href=w+_sis.value}function savePNG(tbl){tbl.style.margin="0",html2canvas(tbl).then(function(canvas){var a=document.createElement("a");a.href=canvas.toDataURL(),a.download="轉蛋機率.png",a.click(),tbl.style.margin=""})}document.getElementById("search-btn").onclick=function(event){event.preventDefault(),event.currentTarget.previousElementSibling.style.display="inline-block"},_sis.oninput=_sis.onfocus=_sis.onkeydown=function(){_s_r.style.display="block"},_sis.onblur=function(){setTimeout(function(){_s_r.style.display="none"},500)},_sis.parentNode.onsubmit=function(e){return _sis.value&&(location.href.includes("enemy")||location.href.includes("esearch")?location.href="/esearch.html?q="+_sis.value:location.href.includes("stage")?location.href="/stage.html?q="+_sis.value:location.href="/search.html?q="+_sis.value),!1},onload=function(){var N,tooltip=document.getElementsByClassName("tooltip")[0];for(N of document.getElementsByClassName("rate")){N.style.position="relative";var node=tooltip.cloneNode(!0);node.style.position="absolute",node.style.right="-0",node.style.top="-2em",node.style.display="block",node._t=N,node.firstChild.onclick=function(e){let t=e.currentTarget.parentNode._t;if(null!=window.domtoimage)return savePNG(t);e=document.createElement("script");e.onload=()=>savePNG(t),e.src="/html2canvas.min.js",document.head.appendChild(e)},N.appendChild(node)}for(let N of document.getElementsByClassName("N")){N.style.position="relative";let node=tooltip.cloneNode(!0);node.style.position="absolute",node.style.right="-0",node.style.top="-2em",node.style.display="block",node._t=N,node.firstChild.onclick=function(e){let t=e.currentTarget.parentNode._t;if(null!=window.domtoimage)return savePNG(t);e=document.createElement("script");e.onload=()=>savePNG(t),e.src="/html2canvas.min.js",document.head.appendChild(e)},N.appendChild(node)}};