const CS=new Set;let theme="light1";function th(e){document.documentElement.setAttribute("data-Q",theme=e.currentTarget.value);for(const x of CS)x.options.theme=theme,x.render()}class DPSRender{constructor(C){var x=document.createElement("div");x.style.height="300px",x.style.width="96%",x.style.margin="5px auto",C.appendChild(x),this.W=new CanvasJS.Chart(x,{animationEnabled:!0,zoomEnabled:!0,responsive:!0,exportEnabled:!0,axisY:{title:"DPS"},axisX:{title:"Range"},legend:{verticalAlign:"top",horizontalAlign:"right",dockInsidePlotArea:!0},toolTip:{shared:!0},data:[],theme:theme}),CS.add(this.W)}D(){this.W.exportChart({format:"png"})}register(title){title={name:this.W.options.exportFileName=title,showInLegend:!0,legendMarkerType:"square",type:"area",markerSize:0};return this.W.options.data.push(title),title}C(){return 0}destroy(){CS.delete(this.W),this.W.destroy(),this.W=null}text(){var objs=this.W.options.data,M={};let i,k,c,t,o;for(o of objs)for(o.Z=[],i=0;i<o.dataPoints.length;){for(c=1,k=o.dataPoints[i].x;++i<o.dataPoints.length&&o.dataPoints[i].x==k;)++c;(t=M[k])?M[k]=Math.max(t,c):M[k]=c}let x_cor=Object.keys(M);(x_cor=x_cor.map(Number)).sort((x,y)=>x-y);var F=[];for(const x of x_cor){for(t=M[x],i=0;i<t;++i)F.push(x);for(o of objs){for(c=0,i=0;i<o.dataPoints.length;++i)if(o.dataPoints[i].x==x){for(;++c,o.Z.push(o.dataPoints[i].y),++i<o.dataPoints.length&&o.dataPoints[i].x===x;);for(k=o.dataPoints[i-1].y;c<t;)o.Z.push(k),++c;break}if(!c)for(k=o.D(x);o.Z.push(k),++c<t;);}}let R="射程\t";for(t=0;t<objs.length;++t)t==objs.length-1?R+=objs[t].name+"\r\n":R+=objs[t].name+"\t";for(i=0;i<F.length;++i)for(R+=F[i].toString()+"\t",t=0;t<objs.length;++t)t==objs.length-1?R+=objs[t].Z[i]+"\r\n":R+=objs[t].Z[i]+"\t";for(o of objs)o.Z=null;return R}plot(obj){obj.dataPoints=[];for(let i=0;i<obj.Xs.length;++i)obj.dataPoints.push({x:obj.Xs[i],y:obj.Ys[i]});obj.Xs.length=0,obj.Ys.length=0,this.W.render()}}